<ion-header>
  <ion-toolbar>
    <ion-title>Edit Details of Module</ion-title>
    <ion-button (click)="closeEditModule()" slot="end" shape="round" fill="outline" color="danger" style="margin-right: 20px;">
      <ion-icon name="close-outline" style="font-size: 30px;"></ion-icon>
    </ion-button>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-card>
    <ion-card-content>

      <form [formGroup]="editModuleDetailsForm" (ngSubmit)="doEditModuleDetails(editModuleDetailsForm.value)">
        <ion-grid>

          <ion-row>
            <ion-col size="5">
              <ion-label class="editModuleFormLabel">
                Module Code
              </ion-label>
            </ion-col>
            <ion-col size="7">
              <ion-item>
                <ion-input placeholder="Code" type="text" clearInput value="{{ passedModuleCode }}" formControlName="moduleCode"></ion-input>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="5">
              <ion-label class="editModuleFormLabel">
                Module Title
              </ion-label>
            </ion-col>
            <ion-col size="7">
              <ion-item>
                <ion-input placeholder="Title" type="text" clearInput value="{{ passedModuleTitle }}" formControlName="moduleTitle"></ion-input>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="5">
              <ion-label class="editModuleFormLabel">
                Credits Weighting
              </ion-label>
            </ion-col>
            <ion-col size="7">
              <ion-item>
                <ion-label>
                  Credits Weighting
                </ion-label>
                <ion-select placeholder="Credits" style="min-width: 100%;" value="{{ passedModuleCreditsWeighting }}" formControlName="creditsWeighting">
                  <ion-select-option *ngFor="let item of publishedCreditsWeighting" value="{{ item.payload.doc.data().creditsWeighting }}">
                    {{ item.payload.doc.data().creditsWeighting }} credits
                  </ion-select-option>
                </ion-select>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="5">
              <ion-label class="editModuleFormLabel">
                Degree Program
              </ion-label>
            </ion-col>
            <ion-col size="7">
              <ion-item>
                <ion-label>
                  Degree Program
                </ion-label>
                <ion-select placeholder="Degree" style="min-width: 100%;" value="{{ passedModuleDegree }}" formControlName="degreeProgram">
                  <ion-select-option value="{{ publishedDegreeProgramDegree }}">{{ publishedDegreeProgramDegree }}, {{ publishedDegreeProgramAwardingBodyUniversity }}</ion-select-option>
                </ion-select>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="5">
              <ion-label class="editModuleFormLabel" style="top: 15px;">
                Academic Year
              </ion-label>
            </ion-col>
            <ion-col size="7">
              
              <div style="border: #ccc solid 1px;
                          border-radius: 5px;">

                <ion-row>
                  <ion-select placeholder="Year" style="min-width: 95%;" value="{{ passedModuleAcademicPeriodYear }}" formControlName="academicPeriodYear">
                    <ion-select-option *ngFor="let item of convertToArray(publishedDegreeProgramNoOfYears); let i = index" value="{{ i + 1 }}">Year {{ i + 1 }}</ion-select-option>
                  </ion-select>
                </ion-row>
                <ion-row>
                  <ion-select placeholder="Semester" style="min-width: 95%;" value="{{ passedModuleAcademicPeriodSemester }}" formControlName="academicPeriodSemester">
                    <ion-select-option *ngFor="let item of convertToArray(publishedDegreeProgramNoOfSemestersAnnaully); let i = index" value="{{ i + 1 }}">Semester {{ i + 1 }}</ion-select-option>
                  </ion-select>
                </ion-row>

              </div>

            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="5">
              <ion-label class="editModuleFormLabel" style="top: 15px;">
                Module Leader
              </ion-label>
            </ion-col>
            <ion-col size="7">
              <ion-item>
                <ion-label>
                  Moduler Leader
                </ion-label>
                <ion-select placeholder="Leader" style="min-width: 100%;" value="{{ passedModuleModuleLeader }}" formControlName="moduleLeader">
                  <ion-select-option *ngFor="let item of registeredLecturers" 
                    value="{{ item.payload.doc.data().name.prefix }} {{ item.payload.doc.data().name.firstName }} {{ item.payload.doc.data().name.lastName }}">
                    {{ item.payload.doc.data().name.prefix }} {{ item.payload.doc.data().name.firstName }} {{ item.payload.doc.data().name.lastName }}
                  </ion-select-option>
                </ion-select>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="5">
              <ion-label class="editModuleFormLabel" style="top: 15px;">
                Assigned Lecturer
              </ion-label>
            </ion-col>
            <ion-col size="7">
              <ion-item>
                <ion-label>
                  Assigned Lecturer
                </ion-label>
                <ion-select placeholder="Lecturer" style="min-width: 100%;" value="{{ passedModuleAssignedLecturer }}" formControlName="assignedLecturer">
                  <ion-select-option *ngFor="let item of registeredLecturers" 
                    value="{{ item.payload.doc.data().name.prefix }} {{ item.payload.doc.data().name.firstName }} {{ item.payload.doc.data().name.lastName }}">
                    {{ item.payload.doc.data().name.prefix }} {{ item.payload.doc.data().name.firstName }} {{ item.payload.doc.data().name.lastName }}
                  </ion-select-option>
                </ion-select>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="5">
              <ion-label class="editModuleFormLabel" style="top: 15px;">
                Assigned Lecture Hall
              </ion-label>
            </ion-col>
            <ion-col size="7">
              <ion-item>
                <ion-label>
                  Assigned Lecture Hall
                </ion-label>
                <ion-select placeholder="Lecture Hall" style="min-width: 100%;" value="{{ passedModuleAssignedLectureHall }}" formControlName="assignedLectureHall">
                  <ion-select-option *ngFor="let item of publishedLectureHalls" value="{{ item.payload.doc.id }}">{{ item.payload.doc.id }}</ion-select-option>
                </ion-select>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row style="margin-top: 20px;">
            <ion-col>
              <ion-button expand="block" type="submit" [disabled]="!editModuleDetailsForm.valid">
                Update
              </ion-button>
            </ion-col>
          </ion-row>
      
        </ion-grid>
      </form>

    </ion-card-content>
  </ion-card>

</ion-content>
